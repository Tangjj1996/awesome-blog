# Vue开发知识点收集（可能有用）

## 1. v-if在组件和dom节点的应用

 `v-if`在vue框架中是非常常见的指令，当然最常见的知识点应该是与`v-show`之间的区别，一句话总结就是`v-if`会真正的销毁重建组件或节点，而`v-show`只是把`style`样式中的`display: none`而已。但是，我们今天的关注点不在这，而是`v-if`写在组件中与写在`dom`节点有什么区别呢？

比如这样(伪码演示)

```vue
// eg.1
// app.vue
<hello-world v-if='visible'/>
    
// HelloWorld.vue
<div>Hello World</div>
```

```vue
// eg.2
// app.vue
<hello-world />
    
// HelloWorld.vue
<div v-if='visible'>Hello World</div>
```

Vue官网解释

> `v-if` 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。
>
> `v-if` 也是**惰性的**：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。

结论就是如果`v-if`用在组件上，那么条件块中的组件生命周期会在为`true`时重新执行；而如果仅仅作用在`dom`节点上(如上面的eg.2)，只会有节点的销毁和重建，组件的生命周期只会加载一次。所以为了符合你预期效果，不再浪费生命中的三个小时（别问我怎么知道的...），请务必在组件外部而不是在组件内的根节点上使用!!!

但是考虑封装性我们还是会把`v-if`写在组件的内部，这时候，通常的策略就是监听组件上的`prop`值做相应的同步。这样有一个特点，因为组件已经加载成功，所以组件的`data`数据不会因为`prop`值的改变而初始化（除非**watch**监听有相应的变化），起到的缓存上一次操作的效果。

## 2. 图片懒加载